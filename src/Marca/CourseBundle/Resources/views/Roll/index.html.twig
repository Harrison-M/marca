{# Marca/CourseBundle/Resources/views/Roll/index.html.twig #}

{% extends 'MarcaUserBundle::layout.html.twig' %}

{% block content %}
<div class="span8 well"> 

    <legend><a href="{{ path('course_home',{'courseid':course.id}) }}">{{course.name}}</a> Roll</legend><a class="btn btn-mini btn-info" href="{{ path('roll', { 'courseid':course.id}) }}">Refresh</a>
    
    <table class="table table-condensed"><tbody>  
    {% for roll in roll %}
    <tr>
        <td>{{ roll.lastname|capitalize }}, {{ roll.firstname|capitalize }}</td> 
        <td>{% if roll.role == 2 %}Instructor{% elseif roll.role == 3 %}TA{% else %}Student{% endif %}</td>
        <td> {% if roll.role == 0 %} PENDING 
            <a class="btn btn-mini btn-primary" href="{{ path('roll_approve', { 'id': roll.id,'courseid':course.id, }) }}">Approve</a>{% endif %}
            Change role to: 
            <a class="btn btn-mini btn-primary" href="{{ path('roll_promote', { 'id': roll.id,'courseid':course.id, 'role':'1'}) }}">Student</a>
            <a class="btn btn-mini btn-primary" href="{{ path('roll_promote', { 'id': roll.id,'courseid':course.id, 'role':'3'}) }}">TA</a>
            <a class="btn btn-mini btn-primary" href="{{ path('roll_promote', { 'id': roll.id,'courseid':course.id, 'role':'2'}) }}">Instructor</a>
            <a class="btn btn-mini btn-warning" href="{{ path('roll_show', { 'id': roll.id,'courseid':course.id, }) }}">Remove</a></td>
    
    </tr>
    {% endfor %}
    </tbody>
     </table>
    
    {{ knp_pagination_render(roll) }}

    {% if course.hasPendingStudents %}<a class="btn btn-primary" href="{{ path('roll_approve_all', {'courseid':course.id, }) }}">Approve All Pending</a>{% endif %}
    
           
</div>
{% endblock %}
