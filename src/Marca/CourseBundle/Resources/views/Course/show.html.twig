{# Marca/CourseBundle/Resources/views/Course/show.html.twig #}

{% extends 'MarcaUserBundle::layout.html.twig' %}

{% block content %}
<div class="span11">

<div class="row-fluid">
<div class="span6 well">  
<h2>{{ course.name }}</h2>    
<table class="table table-bordered table-condensed table-striped">
<thead><th colspan="2">Settings</td></thead>    
<tbody>          
    <tr>
        <th>Time</th>         
        <td>{{ course.time|date('h:i a') }}</td>         
    </tr>           
    <tr>
        <th>Enrollment open</th>         
        <td>{{ course.enroll=='t' ? 'Yes' : 'No' }}</td>         
    </tr>        
    <tr>
        <th>Student can post</th>         
        <td>{{ course.post=='t' ? 'Yes' : 'No' }}</td>         
    </tr>           
    <tr>
        <th>Multicultural Archive</th>         
        <td>{{ course.multicult=='t' ? 'Yes' : 'No' }}</td>         
    </tr>           
    <tr>
        <th>Parent Course</th>         
        <td>{{ course.parentId }}</td>         
    </tr>        
    <tr>
        <th>Assessment</th>         
        <td>{{ course.assessmentId }}</td>         
    </tr>        
    <tr>
        <th>Student may start forum threads</th>         
        <td>{{ course.studentForum=='t' ? 'Yes' : 'No' }}</td>         
    </tr>
    <tr>
        <th colspan="2">Tools</th>              
    </tr>    
    <tr>
        <th>Notes</th>         
        <td>{{ course.notes=='t' ? 'Yes' : 'No' }}</td>         
    </tr>        
    <tr>
        <th>Journal</th>         
        <td>{{ course.journal=='t' ? 'Yes' : 'No' }}</td>         
    </tr>               
    <tr>
        <th>Zine</th>         
        <td>{{ course.zine=='t' ? 'Yes' : 'No' }}</td>         
    </tr>    
    <tr>
        <th>Portfolio</th>         
        <td>{{ course.portfolio=='t' ? 'Yes' : 'No' }}</td>         
    </tr>
    <tr>
        <th>Portfolio Set</th>         
        <td>{% if portset %}{{ portset.name}}{% else %}No portfolio set designated{% endif %}</td>         
    </tr> 
    <tr>
        <th>Portfolio editing open</th>         
        <td>{{ course.portStatus=='t' ? 'Yes' : 'No' }}</td>         
    </tr>
     <tr>
        <th>Tagset</th>         
        <td>{% for tagset in tagsets %}{{ tagset.name}}{% endfor %}</td>         
    </tr>   
    
    
</tbody>
</table>

<div class="row">
<div class="span2">
<a class="btn btn-primary" href="{{ path('course_edit', { 'id': course.id }) }}">Edit</a>
</div> 
    
        
<div class="span1">        
<form action="{{ path('course_delete', { 'id': course.id }) }}" method="post">
            {{ form_widget(delete_form) }}
            <button class="btn btn-danger" type="submit">Delete</button>
</form>
</div>
</div>

<ul class="unstyled"> 
    <li>Created: {{ course.created|date('Y-m-d H:i:s') }}</li>      
    <li>Last Updated:{{ course.updated|date('Y-m-d H:i:s') }}</li>
</ul>
</div>        

<div class="span4 well"> 
    <h2>Projects</h2>
    <table class="table table-condensed">
    <tbody>  
    {% for project in projects %}       
    <tr id="delete{{project.id}}">
        <th>{{ project.name }}</th>         
        <td><a class="btn btn-small btn-primary" href="{{ path('project_edit', { 'id': project.id,'courseid': course.id }) }}">Edit</a></td>  
        <td>
        <button class="btn btn-danger" onclick="$('#confirm{{project.id}}').toggle();$('#delete{{project.id}}').toggle()" type="submit">Delete</button> 
        </td>   
        <td>
            <a class = "btn btn-mini btn-primary" href="{{ path('project_promote', { 'courseid':course.id, 'projectId':project.id}) }}"> <i class = "icon-search icon-white icon-arrow-up"></i></a>
            <a class = "btn btn-mini btn-primary" href="{{ path('project_demote', { 'courseid':course.id, 'projectId':project.id}) }}"> <i class = "icon-search icon-white icon-arrow-down"></i></a>
        </td>
    </tr>
     <tr id="confirm{{project.id}}" class="toggle">
        <th>{{ project.name }}</th>         
        <td>
            <form action="{{ path('project_delete', { 'courseid':course.id,'id': project.id }) }}" method="post">
            {{ form_widget(delete_form) }}
            <button class="btn btn-danger" type="submit">Delete</button>
            </form>
        </td>  
        <td>
        <button  class="btn btn-info" onclick="$('#confirm{{project.id}}').toggle();$('#delete{{project.id}}').toggle()" type="submit">Cancel</button> 
        </td>       
    </tr>   
    {% endfor %}
    </tbody>
    </table>
    
    <hr/> 
    <div class='row'>
        <div class='span2'><a class="btn btn-small btn-primary" href="{{ path('project_new', {'courseid': course.id}) }}">Add a new project</a></div>
    </div>
    
    <hr/>
    <h2>Roll</h2>
    {% for roll in roll %}
    <ul class="unstyled">      
        <li>{{ roll.lastname }}, {{ roll.firstname }} {% if "instructor" in roll.role %}**{% endif %} {% if "pending_student" in roll.role%} PENDING <a class="btn btn-mini btn-primary" href="{{ path('roll_approve', { 'id': roll.id,'courseid':course.id, }) }}">Approve</a>{% endif %}<a class="btn btn-mini btn-primary" href="{{ path('roll_edit', { 'id': roll.id,'courseid':course.id, }) }}">Edit</a></li>         
    </ul> 
    {% endfor %}    
</div>
</div>
        
        
</div>
{% endblock %}
